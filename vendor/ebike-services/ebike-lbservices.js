!function(e,t,r){"use strict";var s="http://0.0.0.0:3000/api",d="authorization",u=t.module("lbServices",["ngResource"]);u.factory("User",["LoopBackResource","LoopBackAuth","$injector",function(e,t){var r=e(s+"/users/:id",{id:"@id"},{prototype$__findById__accessTokens:{url:s+"/users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{url:s+"/users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{url:s+"/users/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:s+"/users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:s+"/users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:s+"/users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:s+"/users/:id/accessTokens/count",method:"GET"},create:{url:s+"/users",method:"POST"},upsert:{url:s+"/users",method:"PUT"},exists:{url:s+"/users/:id/exists",method:"GET"},findById:{url:s+"/users/:id",method:"GET"},find:{isArray:!0,url:s+"/users",method:"GET"},findOne:{url:s+"/users/findOne",method:"GET"},updateAll:{url:s+"/users/update",method:"POST"},deleteById:{url:s+"/users/:id",method:"DELETE"},count:{url:s+"/users/count",method:"GET"},prototype$updateAttributes:{url:s+"/users/:id",method:"PUT"},login:{params:{include:"user"},interceptor:{response:function(e){var r=e.data;return t.setUser(r.id,r.userId,r.user),t.rememberMe=e.config.params.rememberMe!==!1,t.save(),e.resource}},url:s+"/users/login",method:"POST"},logout:{interceptor:{response:function(e){return t.clearUser(),t.clearStorage(),e.resource}},url:s+"/users/logout",method:"POST"},confirm:{url:s+"/users/confirm",method:"GET"},resetPassword:{url:s+"/users/reset",method:"POST"},stat:{isArray:!0,url:s+"/users/stat",method:"GET"},getCurrent:{url:s+"/users/:id",method:"GET",params:{id:function(){var e=t.currentUserId;return null==e&&(e="__anonymous__"),e}},interceptor:{response:function(e){return t.currentUserData=e.data,e.resource}},__isGetCurrentUser__:!0}});return r.updateOrCreate=r.upsert,r.update=r.updateAll,r.destroyById=r.deleteById,r.removeById=r.deleteById,r.getCachedCurrent=function(){var e=t.currentUserData;return e?new r(e):null},r.isAuthenticated=function(){return null!=this.getCurrentId()},r.getCurrentId=function(){return t.currentUserId},r.modelName="User",r}]),u.factory("Bike",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/bikes/:id",{id:"@id"},{create:{url:s+"/bikes",method:"POST"},upsert:{url:s+"/bikes",method:"PUT"},exists:{url:s+"/bikes/:id/exists",method:"GET"},findById:{url:s+"/bikes/:id",method:"GET"},find:{isArray:!0,url:s+"/bikes",method:"GET"},findOne:{url:s+"/bikes/findOne",method:"GET"},updateAll:{url:s+"/bikes/update",method:"POST"},deleteById:{url:s+"/bikes/:id",method:"DELETE"},count:{url:s+"/bikes/count",method:"GET"},prototype$updateAttributes:{url:s+"/bikes/:id",method:"PUT"},stat:{isArray:!0,url:s+"/bikes/stat",method:"GET"},statRegion:{url:s+"/bikes/statRegion",method:"GET"},"::get::cruise::bike":{url:s+"/cruises/:id/bike",method:"GET"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Bike",t}]),u.factory("Manufacturer",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/manufacturers/:id",{id:"@id"},{create:{url:s+"/manufacturers",method:"POST"},upsert:{url:s+"/manufacturers",method:"PUT"},exists:{url:s+"/manufacturers/:id/exists",method:"GET"},findById:{url:s+"/manufacturers/:id",method:"GET"},find:{isArray:!0,url:s+"/manufacturers",method:"GET"},findOne:{url:s+"/manufacturers/findOne",method:"GET"},updateAll:{url:s+"/manufacturers/update",method:"POST"},deleteById:{url:s+"/manufacturers/:id",method:"DELETE"},count:{url:s+"/manufacturers/count",method:"GET"},prototype$updateAttributes:{url:s+"/manufacturers/:id",method:"PUT"},"::get::brand::manufacturer":{url:s+"/brands/:id/manufacturer",method:"GET"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Manufacturer",t}]),u.factory("Brand",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var d=e(s+"/brands/:id",{id:"@id"},{prototype$__get__manufacturer:{url:s+"/brands/:id/manufacturer",method:"GET"},create:{url:s+"/brands",method:"POST"},upsert:{url:s+"/brands",method:"PUT"},exists:{url:s+"/brands/:id/exists",method:"GET"},findById:{url:s+"/brands/:id",method:"GET"},find:{isArray:!0,url:s+"/brands",method:"GET"},findOne:{url:s+"/brands/findOne",method:"GET"},updateAll:{url:s+"/brands/update",method:"POST"},deleteById:{url:s+"/brands/:id",method:"DELETE"},count:{url:s+"/brands/count",method:"GET"},prototype$updateAttributes:{url:s+"/brands/:id",method:"PUT"},stat:{url:s+"/brands/stat",method:"GET"}});return d.updateOrCreate=d.upsert,d.update=d.updateAll,d.destroyById=d.deleteById,d.removeById=d.deleteById,d.modelName="Brand",d.manufacturer=function(){var e=r.get("Manufacturer"),t=e["::get::brand::manufacturer"];return t.apply(d,arguments)},d}]),u.factory("Authmessage",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/authmessages/:id",{id:"@id"},{create:{url:s+"/authmessages",method:"POST"},upsert:{url:s+"/authmessages",method:"PUT"},exists:{url:s+"/authmessages/:id/exists",method:"GET"},findById:{url:s+"/authmessages/:id",method:"GET"},find:{isArray:!0,url:s+"/authmessages",method:"GET"},findOne:{url:s+"/authmessages/findOne",method:"GET"},updateAll:{url:s+"/authmessages/update",method:"POST"},deleteById:{url:s+"/authmessages/:id",method:"DELETE"},count:{url:s+"/authmessages/count",method:"GET"},prototype$updateAttributes:{url:s+"/authmessages/:id",method:"PUT"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Authmessage",t}]),u.factory("Cruise",["LoopBackResource","LoopBackAuth","$injector",function(e,t,r){var d=e(s+"/cruises/:id",{id:"@id"},{prototype$__get__bike:{url:s+"/cruises/:id/bike",method:"GET"},create:{url:s+"/cruises",method:"POST"},upsert:{url:s+"/cruises",method:"PUT"},exists:{url:s+"/cruises/:id/exists",method:"GET"},findById:{url:s+"/cruises/:id",method:"GET"},find:{isArray:!0,url:s+"/cruises",method:"GET"},findOne:{url:s+"/cruises/findOne",method:"GET"},updateAll:{url:s+"/cruises/update",method:"POST"},deleteById:{url:s+"/cruises/:id",method:"DELETE"},count:{url:s+"/cruises/count",method:"GET"},prototype$updateAttributes:{url:s+"/cruises/:id",method:"PUT"}});return d.updateOrCreate=d.upsert,d.update=d.updateAll,d.destroyById=d.deleteById,d.removeById=d.deleteById,d.modelName="Cruise",d.bike=function(){var e=r.get("Bike"),t=e["::get::cruise::bike"];return t.apply(d,arguments)},d}]),u.factory("Test",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/tests/:id",{id:"@id"},{create:{url:s+"/tests",method:"POST"},upsert:{url:s+"/tests",method:"PUT"},exists:{url:s+"/tests/:id/exists",method:"GET"},findById:{url:s+"/tests/:id",method:"GET"},find:{isArray:!0,url:s+"/tests",method:"GET"},findOne:{url:s+"/tests/findOne",method:"GET"},updateAll:{url:s+"/tests/update",method:"POST"},deleteById:{url:s+"/tests/:id",method:"DELETE"},count:{url:s+"/tests/count",method:"GET"},prototype$updateAttributes:{url:s+"/tests/:id",method:"PUT"},stat:{isArray:!0,url:s+"/tests/stat",method:"GET"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Test",t}]),u.factory("Device",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/devices/:id",{id:"@id"},{create:{url:s+"/devices",method:"POST"},upsert:{url:s+"/devices",method:"PUT"},exists:{url:s+"/devices/:id/exists",method:"GET"},findById:{url:s+"/devices/:id",method:"GET"},find:{isArray:!0,url:s+"/devices",method:"GET"},findOne:{url:s+"/devices/findOne",method:"GET"},updateAll:{url:s+"/devices/update",method:"POST"},deleteById:{url:s+"/devices/:id",method:"DELETE"},count:{url:s+"/devices/count",method:"GET"},prototype$updateAttributes:{url:s+"/devices/:id",method:"PUT"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Device",t}]),u.factory("Stat-brand",["LoopBackResource","LoopBackAuth","$injector",function(e){var t=e(s+"/stat-brands/:id",{id:"@id"},{create:{url:s+"/stat-brands",method:"POST"},upsert:{url:s+"/stat-brands",method:"PUT"},exists:{url:s+"/stat-brands/:id/exists",method:"GET"},findById:{url:s+"/stat-brands/:id",method:"GET"},find:{isArray:!0,url:s+"/stat-brands",method:"GET"},findOne:{url:s+"/stat-brands/findOne",method:"GET"},updateAll:{url:s+"/stat-brands/update",method:"POST"},deleteById:{url:s+"/stat-brands/:id",method:"DELETE"},count:{url:s+"/stat-brands/count",method:"GET"},prototype$updateAttributes:{url:s+"/stat-brands/:id",method:"PUT"}});return t.updateOrCreate=t.upsert,t.update=t.updateAll,t.destroyById=t.deleteById,t.removeById=t.deleteById,t.modelName="Stat-brand",t}]),u.factory("LoopBackAuth",function(){function e(){var e=this;d.forEach(function(t){e[t]=s(t)}),this.rememberMe=r,this.currentUserData=null}function t(e,t,r){var s=u+t;null==r&&(r=""),e[s]=r}function s(e){var t=u+e;return localStorage[t]||sessionStorage[t]||null}var d=["accessTokenId","currentUserId"],u="$LoopBack$";return e.prototype.save=function(){var e=this,r=this.rememberMe?localStorage:sessionStorage;d.forEach(function(s){t(r,s,e[s])})},e.prototype.setUser=function(e,t,r){this.accessTokenId=e,this.currentUserId=t,this.currentUserData=r},e.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},e.prototype.clearStorage=function(){d.forEach(function(e){t(sessionStorage,e,null),t(localStorage,e,null)})},new e}).config(["$httpProvider",function(e){e.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function(e,t){return{request:function(u){if(u.url.substr(0,s.length)!==s)return u;if(t.accessTokenId)u.headers[d]=t.accessTokenId;else if(u.__isGetCurrentUser__){var o={body:{error:{status:401}},status:401,config:u,headers:function(){return r}};return e.reject(o)}return u||e.when(u)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(e){d=e},this.setUrlBase=function(e){s=e},this.$get=["$resource",function(e){return function(t,r,s){var d=e(t,r,s);return d.prototype.$save=function(e,t){var r=d.upsert.call(this,{},this,e,t);return r.$promise||r},d}}]})}(window,window.angular);